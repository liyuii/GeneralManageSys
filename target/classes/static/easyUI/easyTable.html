<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- jquery核心库 -->
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <!-- easyui核心库 -->
    <script type="text/javascript" src="../js/jquery.easyui.min.js"></script>
    <!-- easyui核心UI文件 css -->
    <link href="../themes/default/easyui.css" rel="stylesheet" type="text/css"/>
    <!-- easyui图标 -->
    <link href="../themes/icon.css" rel="stylesheet" type="text/css"/>
	<!-- main样式 -->
	<link href="../css/main.css" rel="stylesheet" type="text/css"/>
    <!-- easyui国际化文件 -->
    <script type="text/javascript" src="../js/easyui-lang-zh_CN.js"></script>
</head>


<body>

	<div class="main">
		<div class="tit">
	 		<span class="tit_left fon_14 fon_blue">商品展示</span>
	 	</div>
		<div class="QueryTerms">
			<div class="QueryTerms_main1">
				<div class="QueryTerms_list" >
					<div class="label">商品编码：</div>
					<input type="text" name="code" id="code" class="QreryTerms_input6" style="width:153px;" value=""/>
					<div class="clear"></div>
				</div>
				<div class="QueryTerms_list">
					<div class="label">商品名：</div>
					<input type="text" name="name" id="name" class="QreryTerms_input6" style="width:153px;" value=""/>		
					<div class="clear"></div>
				</div>
				<!-- <div class="clear"></div> -->
				<input type="button" style="margin-top: 10px;" onclick="goSearch()" value="查询"/>
			</div>
			<div class="QueryTerms_main2">
				<div class="clear"></div>
	       	</div>
			<div class="clear"></div>
	    </div>
			<div style="margin-top: 20px;"></div>
		<div class="table_main">
			<div class="dataTableDiv" id="deptData" style="margin: 0; padding: 0;" >
				<div id="stuInfo"></div>
				<div class="clear"></div>
			</div>
		</div>
	</div>




<script>
	$(function () {
		// var datagrid; //定义全局变量datagrid
		// var editRow = undefined; //定义全局变量：当前编辑的行
		$("#stuInfo").datagrid({
			queryParams: {code:"",name:""},
			title:'商品展示',
			iconCls:'icon-save',
			// singleSelect: true,
			striped: true,
			rownumbers:true,
			nowrap:false,
			pagination: true,
			pageSize: 20,
			// fitColumns:true,//处理最后多出来一列
			// url:'json/datagrid_data.json',
			url:'http://localhost:8080/easyUI/returnData.do',
			// method:'get',
			// onBeforeEdit:function(index,row){
			// 	row.editing = true; 
			// 	$('#stuInfo').datagrid('refreshRow', index); 
			// 	editcount++; 
			// 				 }, 
			// onAfterEdit:function(index,row){
			// 	row.editing = false; 
			// 	$('#stuInfo').datagrid('refreshRow', index); 
			// 	editcount--; 
			// }, 
			// onCancelEdit:function(index,row){
			// 	row.editing = false; 
			// 	$('#stuInfo').datagrid('refreshRow', index); 
			// 	editcount--; 
			// }, 
			onLoadSuccess:function(data){
				console.log(data);
				editFun(data);
			},
			// url:'http://localhost:8080/easyUI/returnDataGrid.do',
			columns:[[
				{field:'code',title:'编码',width:100,align:'center'},
				{field:'name',title:'商品名',width:100,align:'center'},
				{field:'price',title:'价格',width:100,align:'center',editor:'numberbox'}
			]],
			// scrollbarSize:0,//处理最后多出来一列
		});
		resizeDivHeight();
	});

	function editFun(){
		var rows = $("#stuInfo").datagrid('getRows');
		console.log(rows);
		for(var i=0;i<rows.length;i++){
			$('#stuInfo').datagrid('beginEdit', i);
		}
	}
	
	function resizeDivHeight() {
		var heightValue = document.body.clientHeight;
		console.log(heightValue);
		// var queryTermsHeight = $(".table_top")[0].offsetHeight;
		// console.log(queryTermsHeight);
		$('#deptData').height(heightValue-110);
		$('#stuInfo').datagrid('resize',{height:500 + ''});
	}
	
	function goSearch(){
				
		var pars = {
			"code":$("#code").val(),
			"name":$("#name").val(),
		}
		//向后台发送参数
		$('#stuInfo').datagrid('load',pars);	
	}
	
</script>


</body>
</html>
